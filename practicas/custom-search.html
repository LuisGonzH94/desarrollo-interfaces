<style>
  body {
    font-family: Arial, sans-serif;
    margin: 0;
  }

  .flex {
    display: flex;
    justify-content: left;
    align-items: center;
    box-sizing: border-box;
  }

  .min-h-60px {
    min-height: 60px;
  }

  .p-10 {
    padding: 10px;
  }

  .shadow-md {
    box-shadow: 0 0 10px #00000061;
  }

  .transparent {
    background: transparent;
  }

  .dialog-search {
    border: none;
    cursor: pointer;
    padding: 10px 20px;
    font-size: 16px;
  }

  .close-btn {
    background-color: #f44336;
    color: white;
    border: none;
    cursor: pointer;
    padding: 10px 20px;
    position: absolute;
    right: 0;
    top: 0;
  }

  dialog {
    background-color: #ffffff;
    border-radius: 4px;
    box-shadow: 0 0 10px #00000061;
    width: 400px;
    padding: 20px;
    position: relative;
    text-align: center;
  }

  #search-results {
    list-style-type: none;
    padding: 0;
  }

  .disabled {
    color: #ccc;
    user-select: none;
  }

  .card {
    height: 100px;
    position: relative;
    box-shadow: 0 0 10px lightblue;
    border-radius: 2%;
    overflow: hidden;
    padding: 20px 0;

    img {
      width: 80px;
      object-fit: cover;
    }

    .flex-col {
      flex-flow: column;
    }

    h5 {
      margin: 0;
      padding: 0;
    }

    p {
      font-size: x-small;
      color: gray;
    }
  }
</style>

<custom-search>
  <div class="flex p-10 shadow-md min-h-60px">
    <button class="dialog-search transparent">üîç SEARCH</button>
  </div>
  <dialog open>
    <button class="close-btn">üóô</button>
    <h1>Search</h1>
    <label for="site-search">Search the site:</label>
    <input type="search" id="site-search" name="q" />

    <template>
      <li>
        <!-- CARD: -->
        <!-- [img] [title] [description] -->
        <div class="flex flex-col items-center card">
          <img class="object-cover" src="https://flowbite.com/docs/images/blog/image-4.jpg">
          <div class="flex flex-col justify-between">
            <h5 class="item-value">{value}</h5>
            <p>Here are the biggest enterprise technology acquisitions of 2021 so far, in reverse chronological order.
            </p>
          </div>
        </div>
      </li>
    </template>

    <ul id="search-results">
      <li class="disabled">Type to search...</li>
    </ul>
  </dialog>
</custom-search>

<script>
  const articles = [
    {
      "image": "https://cdn.kqed.org/wp-content/uploads/sites/35/2024/10/GettyImages-1347890261-1020x680.jpg",
      "title": "Climate Activists Push for Carbon Tax With Measure GG, But Critics Warn it Could Backfire",
      "description": "Grassroots climate activists argue a tax on gas use in large buildings will help all of Berkeley kick fossil fuels. But many politicians, businesses, and nonprofits, even those that work on climate, don‚Äôt think Measure GG is the policy to get there.",
      "date": "2024-10-17T11:00:16Z",
      "category": "Climate"
    },
    {
      "image": "https://fortune.com/img-assets/wp-content/uploads/2024/10/GettyImages-2170862982_413c33-e1729160290535.jpg?resize=1200,600",
      "title": "Musk‚Äôs empire risks being targeted by EU for potential X fines",
      "description": "The EU may target Elon Musk‚Äôs broader business empire for X fines, potentially including revenue from SpaceX and Neuralink to increase penalties.",
      "date": "2024-10-17T10:32:45Z",
      "category": "Business"
    },
    {
      "image": "https://media.autoexpress.co.uk/image/private/s--X-WVjvBW--/f_auto,t_content-image-full-desktop@1/v1729160267/autoexpress/2024/10/Omode E5 first UK drive.jpg",
      "title": "Omoda E5 in Noble trim - pictures",
      "description": "Pictures of the electric Omode E5 SUV being driven on UK roads. Pictures taken by Auto Express senior photographer Pete Gibson",
      "date": "2024-10-17T10:30:56Z",
      "category": "Automobile"
    },
    {
      "image": "https://cdn.mos.cms.futurecdn.net/6xqynicLzH6sSskfiNyWoT-1200-80.jpg",
      "title": "Renault, Alpine and Citro√´n help the 2024 Paris Motor Show return to form",
      "description": "Explore the most delectable debuts at the Paris Motor Show 2024 ‚Äì or Mondial de l'Auto ‚Äì including designs from France's big car makers and niche machines from around the world",
      "date": "2024-10-17T10:25:24Z",
      "category": "Automobile"
    },
    {
      "image": "https://www.computerworld.com/wp-content/uploads/2024/10/3567767-0-90640600-1729160617-IDG-Germany-Intel-September-News.jpg?quality=50&strip=all&w=1024",
      "title": "Chinese cybersecurity association urges review of Intel products",
      "description": "The Cybersecurity Association of China (CSAC) has urged a security review of Intel products sold in the country, claiming the US semiconductor firm poses ongoing threats to China‚Äôs national security and interests.",
      "date": "2024-10-17T10:22:56Z",
      "category": "Technology"
    }
  ]

  class CustomSearch extends HTMLElement {
    constructor() {
      super();
      this.articles = fruits;
    }

    connectedCallback() {
      const dialogBtn = this.querySelector('.dialog-search');
      const closeBtn = this.querySelector('.close-btn');
      const dialog = this.querySelector('dialog');

      dialogBtn.addEventListener('click', () => {
        dialog.showModal();
      });
      closeBtn.addEventListener('click', () => {
        dialog.close();
      });
      const siteSearch = this.querySelector('#site-search');
      siteSearch.addEventListener('input', (event) => this.search(event));
    }

    search(event) {
      event.preventDefault();
      const siteSearch = this.querySelector('#site-search');
      const term = siteSearch.value
      // console.log({term});
      this.renderResults(term)
    }

    renderResults(term = '') {
      // Implement your search logic here
      const searchResults = this.querySelector('#search-results');
      searchResults.innerHTML = '';
      const aux = this.fruits
        .filter(fruit => fruit.toLowerCase().includes(term.toLowerCase()))

      // mode 3 using <template>
      const template = this.querySelector('template').content;
      // loop
      aux.map(fruit => {
        const li = template.querySelector('li').cloneNode(true);
        // TODO replace {value} -> fruta
        searchResults.appendChild(li);
      })
    }
  }
  customElements.define('custom-search', CustomSearch);
</script>
